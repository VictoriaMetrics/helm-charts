
{{- $Values := (.helm).Values | default .Values }}
{{- $multicluster := ((($Values.grafana).sidecar).dashboards).multicluster | default false }}
{{- $defaultDatasource := "prometheus" -}}
{{- $clusterLabel := ($Values.global).clusterLabel | default "cluster" }}
{{- range (($Values.defaultDatasources).victoriametrics).datasources | default list }}
  {{- if and .isDefault .type }}{{ $defaultDatasource = .type }}{{- end }}
{{- end }}
title: Vector K8S Monitoring
templating:
  list:
  - name: datasource
    type: datasource
    query: {{ $defaultDatasource }}
    current: {}
    options: []
    refresh: 1
    regex: ""
  - name: cluster
    label: cluster
    type: {{ ternary "query" "constant" $multicluster }}
    query: {{ ternary (printf "{\"qryType\":1,\"query\":\"label_values(vector_build_info, %s)\",\"refId\":\"PrometheusVariableQueryEditor-VariableQuery\"}" $clusterLabel) ".*" $multicluster }}
    definition: {{ ternary (printf "label_values(vector_build_info, %s)" $clusterLabel) ".*" $multicluster }}
    hide: {{ ternary 0 2 $multicluster }}
    current: {}
    options: []
    refresh: 1
    regex: ""
  - name: instance
    label: instance
    multi: true
    includeAll: true
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    type: query
    query:
      qryType: 1
      query: label_values(vector_build_info, instance)
      refId: PrometheusVariableQueryEditor-VariableQuery
    definition: label_values(vector_build_info, instance)
    current: {}
    options: []
    refresh: 1
    regex: ""
    sort: 1
  - name: namespace
    multi: true
    includeAll: true
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    type: query
    query:
      qryType: 1
      query: {{ printf "label_values(vector_component_received_events_total{component_type=\"kubernetes_logs\",%s=~\"$cluster\"}, pod_namespace)" $clusterLabel }}
      refId: PrometheusVariableQueryEditor-VariableQuery
    definition: {{ printf "label_values(vector_component_received_events_total{component_type=\"kubernetes_logs\",%s=~\"$cluster\"}, pod_namespace)" $clusterLabel }}
    current: {}
    options: []
    refresh: 1
    regex: ""
    sort: 1
editable: false
timezone: {{ default "browser" ($Values.defaultDashboards).defaultTimezone }}
tags:
- vm-k8s-stack
annotations:
  list:
  - name: Annotations & Alerts
    datasource:
      type: datasource
      uid: grafana
    $$hashKey: object:1058
    builtIn: 1
    enable: true
    hide: true
    iconColor: rgba(0, 211, 255, 1)
    target:
      limit: 100
      matchAny: false
      tags: []
      type: dashboard
    type: dashboard
panels:
- title: Source
  panels:
  - title: Log events by top 10 namespaces (events/sec)
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "topk(10, sum(rate(vector_component_received_events_total{component_kind=\"source\",pod_namespace=~\"$namespace\",%s=~\"$cluster\",instance=~\"$instance\"}[1m])) by(component_id,%s,pod_namespace)) by(%s)" $clusterLabel $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      instant: true
      legendFormat: '{{`{{`}} component_id {{`}}`}}: {{`{{`}} pod_namespace {{`}}`}}'
      range: false
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
        unit: cps
      overrides: []
    gridPos:
      h: 12
      w: 6
      x: 0
      "y": 1
    id: 360
    options:
      displayMode: lcd
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: false
      maxVizHeight: 300
      minVizHeight: 16
      minVizWidth: 8
      namePlacement: top
      orientation: horizontal
      reduceOptions:
        calcs: []
        fields: ""
        values: false
      showUnfilled: true
      sizing: auto
      text: {}
      valueMode: color
    pluginVersion: 11.3.0
    type: bargauge
  - title: Log bytes by top 10 namespaces (bytes/sec)
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "topk(10, sum(rate(vector_component_received_event_bytes_total{component_kind=\"source\",pod_namespace=~\"$namespace\",%s=~\"$cluster\",instance=~\"$instance\"}[1m])) by(component_id,pod_namespace,%s)) by(%s)" $clusterLabel $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      instant: true
      legendFormat: '{{`{{`}} component_id {{`}}`}}: {{`{{`}} pod_namespace {{`}}`}}'
      range: false
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
        unit: Bps
      overrides: []
    gridPos:
      h: 12
      w: 6
      x: 6
      "y": 1
    id: 365
    options:
      displayMode: lcd
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: false
      maxVizHeight: 300
      minVizHeight: 16
      minVizWidth: 8
      namePlacement: top
      orientation: horizontal
      reduceOptions:
        calcs: []
        fields: ""
        values: false
      showUnfilled: true
      sizing: auto
      valueMode: color
    pluginVersion: 11.3.0
    type: bargauge
  - title: Log events by top 10 pods (events/sec)
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "topk(10, sum(rate(vector_component_received_events_total{component_kind=\"source\",pod_namespace=~\"$namespace\",%s=~\"$cluster\",instance=~\"$instance\"}[1m])) by(component_id,pod_name,%s)) by(%s)" $clusterLabel $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      instant: true
      legendFormat: '{{`{{`}} component_id {{`}}`}}: {{`{{`}} pod_name {{`}}`}}'
      range: false
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
        unit: cps
      overrides: []
    gridPos:
      h: 12
      w: 6
      x: 12
      "y": 1
    id: 367
    options:
      displayMode: lcd
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: false
      maxVizHeight: 300
      minVizHeight: 16
      minVizWidth: 8
      namePlacement: top
      orientation: horizontal
      reduceOptions:
        calcs: []
        fields: ""
        values: false
      showUnfilled: true
      sizing: auto
      text: {}
      valueMode: color
    pluginVersion: 11.3.0
    type: bargauge
  - title: Log bytes by top 10 pods (bytes/sec)
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "topk(10, sum(rate(vector_component_received_event_bytes_total{component_kind=\"source\",pod_namespace=~\"$namespace\",%s=~\"$cluster\",instance=~\"$instance\"}[1m])) by(pod_name,component_id,%s)) by(%s)" $clusterLabel $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      instant: true
      legendFormat: '{{`{{`}} component_id {{`}}`}}: {{`{{`}} pod_name {{`}}`}}'
      range: false
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
        unit: Bps
      overrides: []
    gridPos:
      h: 12
      w: 6
      x: 18
      "y": 1
    id: 366
    options:
      displayMode: lcd
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: false
      maxVizHeight: 300
      minVizHeight: 16
      minVizWidth: 8
      namePlacement: top
      orientation: horizontal
      reduceOptions:
        calcs: []
        fields: ""
        values: false
      showUnfilled: true
      sizing: auto
      valueMode: color
    pluginVersion: 11.3.0
    type: bargauge
  - title: Events lag seconds
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "histogram_quantile(0.95, sum(rate(vector_source_lag_time_seconds_bucket{%s=~\"$cluster\",instance=~\"$instance\"}[5m])) by(le,component_type,instance,%s))" $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      format: time_series
      instant: false
      interval: ""
      legendFormat: '{{`{{`}}component_type{{`}}`}}: {{`{{`}}instance{{`}}`}}'
      range: true
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
          - color: red
            value: 80
        unit: s
      overrides: []
    gridPos:
      h: 7
      w: 12
      x: 0
      "y": 13
    id: 328
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: single
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  - title: Open files
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "avg(vector_open_files{component_kind=\"source\",%s=~\"$cluster\",instance=~\"$instance\"}) by(component_id,instance,%s)" $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      format: time_series
      instant: false
      interval: ""
      legendFormat: '{{`{{`}}component_id{{`}}`}}: {{`{{`}}instance{{`}}`}}'
      range: true
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
          - color: red
            value: 80
        unit: none
      overrides: []
    gridPos:
      h: 7
      w: 6
      x: 12
      "y": 13
    id: 368
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: single
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  - title: Errors
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "avg(vector_component_errors_total{component_kind=\"source\",%s=~\"$cluster\",instance=~\"$instance\"}) by(component_id,error_type,%s) or 0" $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      format: time_series
      instant: false
      interval: ""
      legendFormat: '{{`{{`}}component_id{{`}}`}}: {{`{{`}}error_type{{`}}`}}'
      range: true
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
          - color: red
            value: 80
        unit: none
      overrides: []
    gridPos:
      h: 7
      w: 6
      x: 18
      "y": 13
    id: 369
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: single
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  collapsed: true
  gridPos:
    h: 1
    w: 24
    x: 0
    "y": 0
  id: 364
  type: row
- title: Transform
  panels:
  - title: Events bytes rate (bytes/sec)
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "sum(rate(vector_component_received_event_bytes_total{component_kind=\"transform\",%s=~\"$cluster\",instance=~\"$instance\"}[1m])) by(component_id,instance,%s)" $clusterLabel $clusterLabel }}
      editorMode: code
      format: time_series
      group: []
      hide: false
      interval: ""
      legendFormat: '{{`{{`}} component_id {{`}}`}}: {{`{{`}} instance {{`}}`}}'
      metricColumn: none
      range: true
      rawQuery: false
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    description: The rate of bytes processed by the component.
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
        unit: Bps
      overrides: []
    gridPos:
      h: 8
      w: 6
      x: 0
      "y": 21
    id: 330
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: multi
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  - title: Utilization
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "avg(vector_utilization{component_kind=\"transform\",%s=~\"$cluster\",instance=~\"$instance\"}) by(component_id,instance,%s)" $clusterLabel $clusterLabel }}
      editorMode: code
      legendFormat: '{{`{{`}}component_id{{`}}`}}: {{`{{`}} instance {{`}}`}}'
      range: true
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    description: A ratio from 0 to 1 of the load on a component. A value of 0 would indicate a completely idle component that is simply waiting for input. A value of 1 would indicate a that is never idle. This value is updated every 5 seconds.
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
          - color: red
            value: 80
        unit: percentunit
      overrides: []
    gridPos:
      h: 8
      w: 6
      x: 6
      "y": 21
    id: 332
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: multi
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  - title: Errors
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "avg(vector_component_errors_total{component_kind=\"transform\",%s=~\"$cluster\",instance=~\"$instance\"}) by(component_id,error_type,%s) or 0" $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      format: time_series
      instant: false
      interval: ""
      legendFormat: '{{`{{`}}component_id{{`}}`}}: {{`{{`}}error_type{{`}}`}}'
      range: true
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
          - color: red
            value: 80
        unit: none
      overrides: []
    gridPos:
      h: 8
      w: 6
      x: 12
      "y": 21
    id: 370
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: single
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  - title: Discarded events
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "avg(vector_events_discarded_total{component_kind=\"transform\",%s=~\"$cluster\",instance=~\"$instance\"}) by(component_id,reason,%s) or 0" $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      format: time_series
      instant: false
      interval: ""
      legendFormat: '{{`{{`}}component_id{{`}}`}}: {{`{{`}}reason{{`}}`}}'
      range: true
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
          - color: red
            value: 80
        unit: none
      overrides: []
    gridPos:
      h: 8
      w: 6
      x: 18
      "y": 21
    id: 371
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: single
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  collapsed: true
  gridPos:
    h: 1
    w: 24
    x: 0
    "y": 1
  id: 363
  type: row
- title: Sink
  panels:
  - title: Events rate (events/sec)
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "sum(rate(vector_component_received_events_total{component_kind=\"sink\",%s=~\"$cluster\",instance=~\"$instance\"}[1m])) by(component_id,instance,%s)" $clusterLabel $clusterLabel }}
      editorMode: code
      legendFormat: '{{`{{`}} component_id {{`}}`}}: {{`{{`}} instance {{`}}`}}'
      range: true
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    description: The count of bytes processed by the component.
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
        unit: cps
      overrides: []
    gridPos:
      h: 8
      w: 6
      x: 0
      "y": 22
    id: 362
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: multi
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  - title: Events bytes rate (bytes/sec)
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "sum(rate(vector_component_received_event_bytes_total{component_kind=\"sink\",%s=~\"$cluster\",instance=~\"$instance\"}[1m])) by(component_id,instance,%s)" $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      format: time_series
      group: []
      hide: false
      instant: false
      interval: ""
      legendFormat: '{{`{{`}} component_id {{`}}`}}: {{`{{`}} instance {{`}}`}}'
      metricColumn: none
      range: true
      rawQuery: false
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    description: The rate of bytes processed by the component.
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
        unit: Bps
      overrides:
      - matcher:
          id: byName
          options: akamai_out_prometheus
        properties:
        - id: displayName
          value: akamai
      - matcher:
          id: byName
          options: cloudfront_out_prometheus
        properties:
        - id: displayName
          value: cloudfront
      - matcher:
          id: byName
          options: out_prometheus_metrics
        properties:
        - id: displayName
          value: vector_metrics
    gridPos:
      h: 8
      w: 6
      x: 6
      "y": 22
    id: 336
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: multi
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  - title: Utilization
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "avg(vector_utilization{component_kind=\"sink\",%s=~\"$cluster\",instance=~\"$instance\"}) by(component_id,instance,%s)" $clusterLabel $clusterLabel }}
      editorMode: code
      legendFormat: '{{`{{`}}component_id{{`}}`}}: {{`{{`}} instance{{`}}`}}'
      range: true
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    description: A ratio from 0 to 1 of the load on a component. A value of 0 would indicate a completely idle component that is simply waiting for input. A value of 1 would indicate a that is never idle. This value is updated every 5 seconds.
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
          - color: red
            value: 80
        unit: percentunit
      overrides: []
    gridPos:
      h: 8
      w: 6
      x: 12
      "y": 22
    id: 338
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: multi
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  - title: Errors
    targets:
    - datasource:
        type: {{ $defaultDatasource }}
        uid: $datasource
      expr: {{ printf "avg(vector_component_errors_total{component_kind=\"sink\",%s=~\"$cluster\",instance=~\"$instance\"}) by(component_id,error_type,%s) or 0" $clusterLabel $clusterLabel }}
      editorMode: code
      exemplar: false
      format: time_series
      instant: false
      interval: ""
      legendFormat: '{{`{{`}}component_id{{`}}`}}: {{`{{`}}error_type{{`}}`}}'
      range: true
      refId: A
    datasource:
      type: {{ $defaultDatasource }}
      uid: $datasource
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          axisBorderShow: false
          axisCenteredZero: false
          axisColorMode: text
          axisLabel: ""
          axisPlacement: auto
          barAlignment: 0
          barWidthFactor: 0.6
          drawStyle: line
          fillOpacity: 0
          gradientMode: none
          hideFrom:
            legend: false
            tooltip: false
            viz: false
          insertNulls: false
          lineInterpolation: linear
          lineWidth: 1
          pointSize: 5
          scaleDistribution:
            type: linear
          showPoints: auto
          spanNulls: false
          stacking:
            group: A
            mode: none
          thresholdsStyle:
            mode: "off"
        mappings: []
        thresholds:
          mode: absolute
          steps:
          - color: green
            value: null
          - color: red
            value: 80
        unit: none
      overrides: []
    gridPos:
      h: 8
      w: 6
      x: 18
      "y": 22
    id: 372
    options:
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: true
      tooltip:
        mode: single
        sort: none
    pluginVersion: 11.3.0
    type: timeseries
  collapsed: true
  gridPos:
    h: 1
    w: 24
    x: 0
    "y": 2
  id: 324
  type: row
condition: true
description: Vector.dev Kubernetes cluster monitoring dashboard
fiscalYearStartMonth: 0
graphTooltip: 1
id: null
links: []
refresh: 10s
schemaVersion: 40
time:
  from: now-1h
  to: now
timepicker: {}
uid: ce3e6irowgf0gf
version: 7
weekStart: ""
